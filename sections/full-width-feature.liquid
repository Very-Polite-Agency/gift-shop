{%- liquid

  assign section_name = 'full-width-feature'
  assign section_id = section_name | append: '--' | append: section.id

  assign aos_id = section_id | append: '--aos'
  assign aos_delay = 250
  assign aos_delay_increment = 250

  assign container = section.settings.container | default: 'container'
  assign cta = section.blocks | where: 'type', 'cta' | default: false
  assign media = section.blocks | where: 'type', 'media' | default: false

  if section.settings.anchor_id != blank
    assign section_id = section.settings.anchor_id
  endif

-%}

{%- style -%}

  .section-{{ section.id }}-padding {
    padding-top: calc({{ section.settings.padding_top }}px * 0.75);
    padding-bottom: calc({{ section.settings.padding_bottom }}px  * 0.75);
  }

  @media screen and (min-width: 992px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

{%- endstyle -%}

<link rel="stylesheet" href="{{ 'section-full-width-feature.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'section-full-width-feature.css' | asset_url | stylesheet_tag }}</noscript>

<div class="{{ section_name }} section-{{ section.id }}-padding" id="{{ section_id }}">
  {% render 'bs-container', state: 'open', col: 'col-12 col-lg-10 offset-lg-1', container: container %}
    <div class="{{ section_name }}__layout" id="{{ aos_id }}">

      {% if media %}
        {% for item in media %}

          {% assign image = item.settings.image | default: false %}
          {% assign type = item.settings.type | default: 'image' %}

          <div class="{{ section_name }}__media">

          {% case type %}
            {% when "image" %}
              {% if image %}
                {% render 'lazyload-image', image: image %}
              {% endif %}
				  {% endcase %}

          {% if cta %}
            {% for item in cta %}

              {% assign colour = item.settings.colour | default: 'blue' %}
              {% assign title = item.settings.title | default: '' %}
              {% assign link = item.settings.link | default: '' %}

              {% if title != blank and link != blank %}
                <div class="{{ section_name }}__cta">
                  {% render 'link', classes: 'full-width-feature__cta-link', colour: colour, link: link, style: 'button-primary', title: title %}
                </div>
              {% endif %}

            {% endfor %}
          {% endif %}

        </div>

        {% endfor %}
      {% endif %}

    </div>
  {% render 'bs-container', state: 'closed' %}
</div>

{% schema %}
{
  "name": "Full Width Feature",
  "tag": "section",
  "class": "section section--full-width-feature",
  "settings": [
    {
			"content": "Layout",
			"type": "header"
		},
    {
      "label": "Container",
      "type": "select",
      "options": [
        { "value": "container", "label": "Static" },
        { "value": "container-fluid", "label": "Fluid" }
      ],
      "default": "container",
      "id": "container"
    },
    {
			"content": "Anchor",
			"type": "header"
		},
    {
      "label": "Anchor ID",
      "info": "Optionally include a unique ID so that sections within the page can be linked to. Anchor IDs must be all lowercase, unique and replaced empty spaces with hyphens. For example: my-great-section-anchor",
      "type": "text",
      "id": "anchor_id"
    },
    {
			"content": "Padding",
			"type": "header"
		},
		{
			"label": "Top Padding",
			"type": "range",
			"min": 0,
			"max": 120,
			"step": 4,
			"unit": "px",
			"default": 36,
      "id": "padding_top"
		},
		{
			"label": "Bottom Padding",
			"type": "range",
			"min": 0,
			"max": 120,
			"step": 4,
			"unit": "px",
			"default": 36,
      "id": "padding_bottom"
		}
  ],
  "blocks": [
    {
      "name": "Call to Action",
      "type": "cta",
      "limit": 1,
      "settings": [
        {
          "label": "Colour",
          "type": "select",
          "options": [
            { "value": "blue", "label": "Blue" },
            { "value": "yellow", "label": "Yellow" }
          ],
          "default": "blue",
          "id": "colour"
        },
        {
          "label": "Title",
          "type": "text",
          "id": "title"
        },
        {
          "label": "Link",
          "type": "url",
          "id": "link"
        }
      ]
    },
    {
      "name": "Media",
      "type": "media",
      "limit": 1,
      "settings": [
        {
          "label": "Type",
          "type": "select",
          "options": [
            { "value": "image", "label": "Image" }
          ],
          "default": "image",
          "id": "type"
        },
        {
          "label": "Image",
          "type": "image_picker",
          "id": "image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Full Width Feature"
    }
  ]
}
{% endschema %}
